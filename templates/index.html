<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rental Profit Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; padding: 20px; background-color: #f4f4f4; }
        h1 { text-align: center; }
        form { background: white; padding: 20px; border-radius: 8px; max-width: 500px; margin: auto; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); }
        label { font-weight: bold; display: block; margin-top: 10px; }
        input, button { width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; }
        button { background-color: #007bff; color: white; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        #result { text-align: center; font-size: 18px; margin-top: 20px; }
    </style>
</head>
<body>

    <h1>Rental Profit Calculator</h1>

    <form id="calculationForm">
        <label for="purchaseAmount">Property Purchase Price (ZAR):</label>
        <input type="number" id="purchaseAmount" name="purchaseAmount" required>

        <label for="furnishingCost">Furnishing Costs (ZAR, if any):</label>
        <input type="number" id="furnishingCost" name="furnishingCost">

        <label for="leviesRates">Monthly Levies & Rates (ZAR):</label>
        <input type="number" id="leviesRates" name="leviesRates">

        <label for="internetCost">Monthly Internet Cost (ZAR):</label>
        <input type="number" id="internetCost" name="internetCost">

        <label for="electricityCost">Average Prepaid Electricity Cost (ZAR):</label>
        <input type="number" id="electricityCost" name="electricityCost">

        <label for="otherFees">Other Building/Owner Fees (ZAR):</label>
        <input type="number" id="otherFees" name="otherFees">

        <label for="cleaningFees">Monthly Cleaning Fees (ZAR):</label>
        <input type="number" id="cleaningFees" name="cleaningFees">

        <label for="consumables">Monthly Consumable Costs (Toiletries, Cleaning Supplies, etc.) (ZAR):</label>
        <input type="number" id="consumables" name="consumables">

        <label for="occupancyRate">Average Monthly Occupancy (Days Booked Per Month):</label>
        <input type="number" id="occupancyRate" name="occupancyRate">

        <button type="button" id="calculateBtn">Calculate</button>
    </form>

    <div id="result"></div>

    <script>
        document.getElementById("calculateBtn").addEventListener("click", function() {
            let formData = new FormData(document.getElementById("calculationForm"));

            fetch("/calculate", {
                method: "POST",
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("result").innerHTML = `
                    <p><strong>Minimum Nightly Rate:</strong> R${data.min_rate}</p>
                    <p><strong>Nights Needed to Break Even:</strong> ${data.nights_to_break_even}</p>
                    <p><strong>Nights Needed for 20% Profit:</strong> ${data.nights_for_20_profit}</p>
                `;
            })
            .catch(error => console.error("Error:", error));
        });
    </script>

</body>
</html>
